{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\SANAL\\\\chat-app\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\nimport ErrorBoundary from './components/ErrorBoundary';\nimport Chat from './components/Chat';\nimport LoginForm from './components/LoginForm';\nimport { initializeSocket, disconnectSocket } from './services/socket';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [user, setUser] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    // Check if user is already logged in (from localStorage or session)\n    const checkAuthStatus = async () => {\n      try {\n        const savedUser = localStorage.getItem('chatUser');\n        if (savedUser) {\n          const userData = JSON.parse(savedUser);\n          setUser(userData);\n          initializeSocket(userData);\n        }\n      } catch (err) {\n        console.error('Error checking auth status:', err);\n        setError('Failed to restore user session');\n        // Clear potentially corrupted data\n        localStorage.removeItem('chatUser');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    checkAuthStatus();\n\n    // Cleanup on unmount\n    return () => {\n      disconnectSocket();\n    };\n  }, []);\n  const handleLogin = async userData => {\n    try {\n      setError(null);\n      setUser(userData);\n      localStorage.setItem('chatUser', JSON.stringify(userData));\n      initializeSocket(userData);\n    } catch (err) {\n      console.error('Login error:', err);\n      setError('Failed to login. Please try again.');\n    }\n  };\n  const handleLogout = () => {\n    try {\n      setUser(null);\n      localStorage.removeItem('chatUser');\n      disconnectSocket();\n      setError(null);\n    } catch (err) {\n      console.error('Logout error:', err);\n      setError('Error during logout');\n    }\n  };\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app-loading\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading FlashTalk...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(ErrorBoundary, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"app-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"FlashTalk\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), user && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"Welcome, \", user.username || user.name || 'User', \"!\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleLogout,\n            className: \"logout-btn\",\n            children: \"Logout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"app-main\",\n        children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-message\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setError(null),\n            className: \"dismiss-error\",\n            children: \"Dismiss\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this), !user ? /*#__PURE__*/_jsxDEV(ErrorBoundary, {\n          children: /*#__PURE__*/_jsxDEV(LoginForm, {\n            onLogin: handleLogin\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(ErrorBoundary, {\n          children: /*#__PURE__*/_jsxDEV(Chat, {\n            user: user\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"caAZa649wyY9nHJT6au393y4yCs=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","ErrorBoundary","Chat","LoginForm","initializeSocket","disconnectSocket","jsxDEV","_jsxDEV","App","_s","user","setUser","isLoading","setIsLoading","error","setError","checkAuthStatus","savedUser","localStorage","getItem","userData","JSON","parse","err","console","removeItem","handleLogin","setItem","stringify","handleLogout","className","children","fileName","_jsxFileName","lineNumber","columnNumber","username","name","onClick","onLogin","_c","$RefreshReg$"],"sources":["C:/Users/SANAL/chat-app/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './App.css';\r\nimport ErrorBoundary from './components/ErrorBoundary';\r\nimport Chat from './components/Chat';\r\nimport LoginForm from './components/LoginForm';\r\nimport { initializeSocket, disconnectSocket } from './services/socket';\r\n\r\nfunction App() {\r\n  const [user, setUser] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    // Check if user is already logged in (from localStorage or session)\r\n    const checkAuthStatus = async () => {\r\n      try {\r\n        const savedUser = localStorage.getItem('chatUser');\r\n        if (savedUser) {\r\n          const userData = JSON.parse(savedUser);\r\n          setUser(userData);\r\n          initializeSocket(userData);\r\n        }\r\n      } catch (err) {\r\n        console.error('Error checking auth status:', err);\r\n        setError('Failed to restore user session');\r\n        // Clear potentially corrupted data\r\n        localStorage.removeItem('chatUser');\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    checkAuthStatus();\r\n\r\n    // Cleanup on unmount\r\n    return () => {\r\n      disconnectSocket();\r\n    };\r\n  }, []);\r\n\r\n  const handleLogin = async (userData) => {\r\n    try {\r\n      setError(null);\r\n      setUser(userData);\r\n      localStorage.setItem('chatUser', JSON.stringify(userData));\r\n      initializeSocket(userData);\r\n    } catch (err) {\r\n      console.error('Login error:', err);\r\n      setError('Failed to login. Please try again.');\r\n    }\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    try {\r\n      setUser(null);\r\n      localStorage.removeItem('chatUser');\r\n      disconnectSocket();\r\n      setError(null);\r\n    } catch (err) {\r\n      console.error('Logout error:', err);\r\n      setError('Error during logout');\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"app-loading\">\r\n        <div className=\"loading-spinner\"></div>\r\n        <p>Loading FlashTalk...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <ErrorBoundary>\r\n      <div className=\"App\">\r\n        <header className=\"app-header\">\r\n          <h1>FlashTalk</h1>\r\n          {user && (\r\n            <div className=\"user-info\">\r\n              <span>Welcome, {user.username || user.name || 'User'}!</span>\r\n              <button onClick={handleLogout} className=\"logout-btn\">\r\n                Logout\r\n              </button>\r\n            </div>\r\n          )}\r\n        </header>\r\n        \r\n        <main className=\"app-main\">\r\n          {error && (\r\n            <div className=\"error-message\">\r\n              <p>{error}</p>\r\n              <button onClick={() => setError(null)} className=\"dismiss-error\">\r\n                Dismiss\r\n              </button>\r\n            </div>\r\n          )}\r\n          \r\n          {!user ? (\r\n            <ErrorBoundary>\r\n              <LoginForm onLogin={handleLogin} />\r\n            </ErrorBoundary>\r\n          ) : (\r\n            <ErrorBoundary>\r\n              <Chat user={user} />\r\n            </ErrorBoundary>\r\n          )}\r\n        </main>\r\n      </div>\r\n    </ErrorBoundary>\r\n  );\r\n}\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}