{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\SANAL\\\\chat-app\\\\frontend\\\\src\\\\components\\\\chat.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport MessageList from './MessageList';\nimport MessageInput from './MessageInput';\nimport UserList from './UserList';\nimport socketService from '../services/socket';\nimport './Chat.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Chat = ({\n  user,\n  onLeave\n}) => {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [users, setUsers] = useState([]);\n  const [typingUsers, setTypingUsers] = useState([]);\n  useEffect(() => {\n    // Connect to socket and join room\n    socketService.connect();\n    socketService.joinRoom(user);\n\n    // Set up event listeners\n    socketService.onMessage(message => {\n      setMessages(prev => [...prev, message]);\n    });\n    socketService.onMessageHistory(history => {\n      setMessages(history);\n    });\n    socketService.onUserList(userList => {\n      setUsers(userList);\n    });\n    socketService.onUserTyping(data => {\n      setTypingUsers(prev => {\n        if (data.isTyping) {\n          return prev.includes(data.username) ? prev : [...prev, data.username];\n        } else {\n          return prev.filter(username => username !== data.username);\n        }\n      });\n    });\n\n    // Cleanup on unmount\n    return () => {\n      socketService.disconnect();\n    };\n  }, [user]);\n  const handleSendMessage = message => {\n    socketService.sendMessage(message);\n  };\n  const handleTyping = isTyping => {\n    socketService.setTyping(isTyping);\n  };\n  const handleLeave = () => {\n    socketService.disconnect();\n    onLeave();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Chat Room: \", user.room]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"leave-button\",\n        onClick: handleLeave,\n        children: \"Leave Chat\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-body\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-main\",\n        children: [/*#__PURE__*/_jsxDEV(MessageList, {\n          messages: messages,\n          typingUsers: typingUsers\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MessageInput, {\n          onSendMessage: handleSendMessage,\n          onTyping: handleTyping\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-sidebar\",\n        children: /*#__PURE__*/_jsxDEV(UserList, {\n          users: users,\n          currentUser: user.username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n};\n_s(Chat, \"ze4QWAxStjhbP4SsQGLedoEgX3g=\");\n_c = Chat;\nexport default Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useState","useEffect","MessageList","MessageInput","UserList","socketService","jsxDEV","_jsxDEV","Chat","user","onLeave","_s","messages","setMessages","users","setUsers","typingUsers","setTypingUsers","connect","joinRoom","onMessage","message","prev","onMessageHistory","history","onUserList","userList","onUserTyping","data","isTyping","includes","username","filter","disconnect","handleSendMessage","sendMessage","handleTyping","setTyping","handleLeave","className","children","room","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onSendMessage","onTyping","currentUser","_c","$RefreshReg$"],"sources":["C:/Users/SANAL/chat-app/frontend/src/components/chat.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport MessageList from './MessageList';\r\nimport MessageInput from './MessageInput';\r\nimport UserList from './UserList';\r\nimport socketService from '../services/socket';\r\nimport './Chat.css';\r\n\r\nconst Chat = ({ user, onLeave }) => {\r\n  const [messages, setMessages] = useState([]);\r\n  const [users, setUsers] = useState([]);\r\n  const [typingUsers, setTypingUsers] = useState([]);\r\n\r\n  useEffect(() => {\r\n    // Connect to socket and join room\r\n    socketService.connect();\r\n    socketService.joinRoom(user);\r\n\r\n    // Set up event listeners\r\n    socketService.onMessage((message) => {\r\n      setMessages(prev => [...prev, message]);\r\n    });\r\n\r\n    socketService.onMessageHistory((history) => {\r\n      setMessages(history);\r\n    });\r\n\r\n    socketService.onUserList((userList) => {\r\n      setUsers(userList);\r\n    });\r\n\r\n    socketService.onUserTyping((data) => {\r\n      setTypingUsers(prev => {\r\n        if (data.isTyping) {\r\n          return prev.includes(data.username) \r\n            ? prev \r\n            : [...prev, data.username];\r\n        } else {\r\n          return prev.filter(username => username !== data.username);\r\n        }\r\n      });\r\n    });\r\n\r\n    // Cleanup on unmount\r\n    return () => {\r\n      socketService.disconnect();\r\n    };\r\n  }, [user]);\r\n\r\n  const handleSendMessage = (message) => {\r\n    socketService.sendMessage(message);\r\n  };\r\n\r\n  const handleTyping = (isTyping) => {\r\n    socketService.setTyping(isTyping);\r\n  };\r\n\r\n  const handleLeave = () => {\r\n    socketService.disconnect();\r\n    onLeave();\r\n  };\r\n\r\n  return (\r\n    <div className=\"chat-container\">\r\n      <div className=\"chat-header\">\r\n        <h2>Chat Room: {user.room}</h2>\r\n        <button className=\"leave-button\" onClick={handleLeave}>\r\n          Leave Chat\r\n        </button>\r\n      </div>\r\n      \r\n      <div className=\"chat-body\">\r\n        <div className=\"chat-main\">\r\n          <MessageList messages={messages} typingUsers={typingUsers} />\r\n          <MessageInput \r\n            onSendMessage={handleSendMessage}\r\n            onTyping={handleTyping}\r\n          />\r\n        </div>\r\n        \r\n        <div className=\"chat-sidebar\">\r\n          <UserList users={users} currentUser={user.username} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chat;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}